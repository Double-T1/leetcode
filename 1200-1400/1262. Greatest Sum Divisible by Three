//heap out of memory
//time: O(2**n)
//space: O(2**n)
var maxSumDivThree = function(nums) {
    return helper(nums)
};

let helper = (nums,i=0,sum=0,memo={}) => {
    if (i in memo && sum in memo[i]) return memo[i][sum]
    if (memo[i] === undefined) memo[i] = {}

    if (i === nums.length) {
        if (sum%3 === 0) {
            memo[i][sum] = sum
        } else {
            memo[i][sum] = 0
        }
    } else {
        memo[i][sum] = Math.max(helper(nums,i+1,sum,memo),helper(nums,i+1,sum+nums[i],memo))
    }
    return memo[i][sum]
}

//using hashtable
//time: O(n)
//space: O(1)
var maxSumDivThree2 = function(nums) {
    let map = [0,0,0]
    for (let i=0; i<nums.length; i++) {
        let res = nums[i]%3
        let com = (3-res)%3
        let c = []
        c[0] = map[com] + nums[i]
        c[1] = map[(com+1)%3] + nums[i]
        c[2] = map[(com+2)%3] + nums[i]
        if (c[0]%3===0) map[0] = Math.max(map[0],c[0])            
        if (c[1]%3===1) map[1] = Math.max(map[1],c[1])
        if (c[2]%3===2) map[2] = Math.max(map[2],c[2])
    }

    return map[0]
};

let  nums = [1,2,3,4,4]
console.log(maxSumDivThree2(nums))
