function Node (val,prev,next) {
    this.val = val
    this.next = next
    this.prev = prev
}

//values might not be unique
var longestConsecutive = function(nums) {
    let map = new Map()
    for (let i=0; i<nums.length; i++) {
        let prev = nums[i]-1
        let next = nums[i]+1
        if (!map.has(nums[i])) {
            let node = new Node(nums[i])
            map.set(nums[i],node)
            if (map.has(prev)) {
                prev = map.get(prev)
                node.prev = prev
                prev.next = node
            }
            if (map.has(next)) {
                next = map.get(next)
                node.next = next
                next.prev = node
            }
        }
    }

    let max = 0
    for (let node of map.values()) {
        if (node.val !== null) {
            max = Math.max(count(node,map),max)
        } 
    }
    return max
};

let count = (node) => {
    node.val = null
    let prev = node.prev 
    let next = node.next
    let count = 1
    while (prev) {
        count++
        prev.val = null
        prev = prev.prev
    }
    while (next) {
        count++
        next.val = null
        next = next.next
    }
    return count
}

let nums = [0,3,7,2,5,8,4,6,0,1]
console.log(longestConsecutive(nums))
